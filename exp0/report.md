## 作业零

无13 管思源 2021012702

#### 一、`openmp_pow.cpp`和`mpi_pow.cpp`中修改后函数`pow_a`的源代码。

`openmp_pow.cpp`

```cpp
void pow_a(int *a, int *b, int n, int m) {
    // TODO: 使用 omp parallel for 并行这个循环
    #pragma omp parallel for
    for (int i = 0; i < n; i++) {
        int x = 1;
        for (int j = 0; j < m; j++)
            x *= a[i];
        b[i] = x;
    }
}
```

`mpi_pow.cpp`

```cpp
void pow_a(int *a, int *b, int n, int m, int comm_sz /* 总进程数 */) {
    // TODO: 对这个进程拥有的数据计算 b[i] = a[i]^m
    for (int i = 0; i < n / comm_sz; i++) {
        int tmp = a[i];
        for (int j = 1; j < m; j++) {
            tmp *= a[i];
        }
        b[i] = tmp;
    }
}
```

#### 二、对`openmp`版本，报告使用`1`,`7`,`14`,`28`线程在`n=112000`，`m=100000`下的运行时间，及相对单线程的加速比。

| 线程数        | 1        | 7       | 14      | 28     |
| ------------- | -------- | ------- | ------- | ------ |
| 运行时间（us) | 14025461 | 2009674 | 1021627 | 516162 |
| 加速比        | 1        | 6.979   | 13.729  | 27.173 |

#### 三、对`MPI`版本，报告`1×1`，`1×7`，`1×14`，`1×28`，`2×28`进程（`N×P`表示`N`台机器，每台机器`P`个进程）在`n=112000`，`m=100000`下的运行时间，及相对单进程的加速比。

| 进程          | 1×1      | 1×7     | 1×14    | 1×28   | 2×28   |
| ------------- | -------- | ------- | ------- | ------ | ------ |
| 运行时间（us) | 14011421 | 2012219 | 1013690 | 501656 | 354169 |
| 加速比        | 1        | 6.963   | 13.822  | 27.930 | 39.561 |
